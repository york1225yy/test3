SDK_DIR := /home/xxx/xxxx_SDK_Vx.x.x.x_Bxxx/
CROSS := arm-v01c02-linux-musleabi-
# CROSS := arm-v01c02-linux-gnueabi-

SRC_DIR := $(shell pwd)
CONTROL_LIB_DIR := $(shell pwd)/../release

TARGET := test_control

LIBS :=
LIBS+= $(CONTROL_LIB_DIR)/libaqcontrol.a

LIBS+= -L$(SDK_DIR)/smp/a7_linux/source/out/lib/
LIBS+= -lvoice_engine -lupvqe -ldnvqe -laac_dec -laac_enc -lsecurec -laac_comm
LIBS+= -lss_mpi_sysmem -lss_mpi_audio -lss_mpi_sysbind

CC = $(CROSS)gcc

SRC := $(SRC_DIR)/src/test_main.c
INC_PATH := -I$(SRC_DIR)/include
OBJ := $(SRC:%.c=%.o)

CFLAGS := -fPIC -Wall -lm -ldl -lpthread -lstdc++ -mcpu=cortex-a53

.PHONY: all $(TARGET) clean

all : $(TARGET)

$(TARGET) : $(OBJ)
	$(CC) $(CFLAGS) -o $@ $^ $(LIBS)
$(OBJ) : $(SRC)
	$(CC) $(INC_PATH) $(CFLAGS) -o $@ -c $<

clean:
	@rm -f $(TARGET)
	@rm -f $(OBJ)
